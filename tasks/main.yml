---
- name: Fail if the OS is not supported
  fail:
    msg="This role is not supported on {{ansible_distribution}}"
  when: "ansible_distribution != 'Ubuntu' and ansible_os_family != 'RedHat'"

- name: create log directory  
  file:
    path: "{{ mesos_log_dir }}"
    state: directory
    mode: 0755
  tags:
    - mesos-master
    - mesos-slave

- name: Include distribution-specific variables
  include_vars: "{{ item }}"
  with_first_found:
    - "vars/{{ ansible_distribution|lower }}.yml"
    - "vars/{{ ansible_os_family|lower }}.yml"

- include: master.yml
  when: mesos_install_mode == "master"

- include: slave.yml
  when: mesos_install_mode == "slave"
